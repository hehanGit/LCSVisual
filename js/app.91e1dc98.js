(function(){"use strict";var e={3742:function(e,t,n){var i=n(6369),s=function(){var e=this,t=e._self._c;return t("div",[t("h_topConfig",{attrs:{machines:e.machines},on:{webApiConfigFunc:e.webApiConfigFunc,selectMachineFunc:e.selectMachineFunc,reconnectWSFunc:e.reconnectWSFunc,loadMachineDataFunc:e.loadMachineDataFunc}}),t("div",{attrs:{id:"body_content"}},[t("div",{staticClass:"body_content_center"},[t("div",{staticClass:"left_btns"},[t("h_sidebarBtnGroup",{attrs:{webApiConfig:e.webApiConfig,receiveMsg:e.receiveMsg},on:{selectWebApiFunc:e.selectWebApiFunc,clickWebApiBtnFunc:e.clickWebApiBtnFunc}})],1),t("div",{staticClass:"right_con"},[t("h_paramsMgr",{attrs:{curSelectWebApi:e.curSelectWebApi,curMachine:e.curMachine,receiveMsg:e.receiveMsg,isClickWebApiBtn:e.isClickWebApiBtn},on:{clickWebApiBtnHandleFunc:e.clickWebApiBtnHandleFunc}})],1)])]),t("h_footerBar",{attrs:{toFooterMsg:e.toFooterMsg}})],1)},a=[],r=(n(7658),function(){var e=this,t=e._self._c;return t("div",[null!=e.webApiConfig?t("ul",{attrs:{id:"methodBar_tac"}},e._l(e.webApiConfig.methods,(function(n,i){return t("li",{key:i,staticClass:"btn-item"},["out"==n.type?t("el-button",{staticClass:"btn_style",on:{click:function(t){return e.selectWebApi(n,i)}}},[t("i",{staticClass:"el-icon-connection"}),t("span",[e._v(e._s(n.des))])]):e._e(),"in"==n.type?t("el-button",{staticClass:"haveIcon",staticStyle:{background:"#ffffff"},on:{click:function(t){return e.selectWebApi(n,i)}}},[t("i",{staticClass:"el-icon-connection"}),t("span",[e._v(e._s(n.des))]),e.msgNum[n.name]>0?t("span",{staticClass:"num",domProps:{textContent:e._s(e.msgNum[n.name])}}):e._e()]):e._e()],1)})),0):e._e()])}),o=[],l={name:"sidebarBtnGroup",props:["webApiConfig","receiveMsg"],data(){return{curIndex:-1,msgNum:{}}},methods:{selectWebApi(e,t){this.curIndex=-1,this.$emit("selectWebApiFunc",{webApi:e,curIndex:t}),this.$emit("clickWebApiBtnFunc",!0)}},watch:{webApiConfig:{handler:function(e){if(null!=e)for(var t=0;t<this.webApiConfig.methods.length;t++)this.msgNum[this.webApiConfig.methods[t].name]=0}},receiveMsg:{handler:function(e){if(console.log(e+"dwdwa"),null!=e){for(var t=0;t<e.length;t++)this.$set(this.msgNum,e[t].name,e[t].msgs.length);this.$forceUpdate(),console.log(this.msgNum)}},deep:!0}}},c=l,h=n(1001),u=(0,h.Z)(c,r,o,!1,null,null,null),p=u.exports,m=function(){var e=this,t=e._self._c;return null!=e.curSelectWebApi?t("div",{attrs:{id:"paramsMgr"}},[t("el-row",{staticClass:"controller"},[t("h2",{staticClass:"explain"},[e._v(e._s(null!=e.curSelectWebApi?this.curSelectWebApi.webApi.des+this.curSelectWebApi.webApi.name:""))]),t("el-button",{attrs:{type:"primary"}},[e._v("锁定")]),t("el-button",{attrs:{type:"success"}},[e._v("保存")])],1),t("el-divider"),t("div",{staticClass:"content"},[t("div",e._l(e.paramData,(function(n,i){return t("div",{key:i,staticClass:"item"},[e.values?t("div",[t("el-input",{attrs:{placeholder:"请输入"+n.name},model:{value:e.values[i].paramValue,callback:function(t){e.$set(e.values[i],"paramValue",t)},expression:"values[index].paramValue"}},[t("template",{slot:"prepend"},[e._v(e._s(n.name))])],2),n.isCanValue?t("h4",{staticClass:"info"},e._l(n.values,(function(n,i){return t("span",{key:i},[e._v(e._s(n.canValue+n.des))])})),0):e._e()],1):e._e()])})),0),"out"==e.itemType?t("el-row",[t("el-button",{attrs:{type:"primary"},on:{click:e.toUnityResquest}},[e._v("To Unity")]),t("div",{staticClass:"res"},[t("h4",[e._v("Unity响应的数据：")]),t("div",{staticClass:"text-wrapper"},[e._v(e._s(e.resInfo))])])],1):e._e(),"in"==e.itemType?t("el-row",[t("el-button",{attrs:{type:"primary"},on:{click:e.onWriteServe}},[e._v("Write Serve")]),t("div",{staticClass:"res"},[t("h4",[e._v("Unity请求的数据：")]),t("div",{staticClass:"text-wrapper"},[e._v(e._s(e.unityResInfo))])])],1):e._e()],1)],1):e._e()},d=[],v={name:"paramsMgr",props:["curSelectWebApi","curMachine","receiveMsg","isClickWebApiBtn"],beforeDestroy(){console.log("销毁销毁")},data(){return{machineId:"未选择专机",methodName:"",paramData:null,values:[],itemType:"",resInfo:"",unityResInfo:""}},methods:{toUnityResquest(){if("未选择专机"==this.machineId)return void this.$message.error("当前未选择专机，禁止发送消息");let e={};for(var t=0;t<this.values.length;t++)e[this.values[t].paramName]=this.values[t].paramValue,"string"==this.values[t].paramType?e[this.values[t].paramName]=""+e[this.values[t].paramName]:"int"==this.values[t].paramType&&(e[this.values[t].paramName]=Number(e[this.values[t].paramName])),"bool"==this.values[t].paramType&&(e[this.values[t].paramName]=Boolean(e[this.values[t].paramName]));this.toSendUnity(e)},async toSendUnity(e){this.$message({message:"To Unity：消息发送成功\n"+this.methodName,type:"success"});var t=this.nethelp.toPackJsonStr("Unity3D",this.curSelectWebApi.webApi.name,e);await this.axios.post(this.nethelp.toUnityUrl,t).then((e=>{var t=JSON.stringify(e.data);this.resInfo=t.replace(/,/g,",\n"),this.resInfo=this.resInfo.replace(/{/g,"{\n"),this.resInfo=this.resInfo.replace(/}/g,"}\n"),console.log(this.resInfo)})).catch((e=>{this.resInfo=`url:${this.nethelp.toUnityUrl}\n    methodName:${this.curSelectWebApi.webApi.name}\n    error:${e}`,this.$message.error(e)}))},async onWriteServe(){console.log(this.values);var e=this.nethelp.toPackJsonStr("Web","Web.Machine.WriteInData",{methodName:this.methodName,data:this.values});await this.axios.post(this.nethelp.toServeUrl,e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{console.log(e.data),this.resInfo=e.data})).catch((e=>{alert(e)}))}},watch:{curSelectWebApi:{handler:function(e,t){if(console.log(e,t),null!=e){if(this.values=[],console.log(e),this.itemType=e.webApi.type,this.methodName=e.webApi.name,null==e||void 0==e)return;let t=e.webApi,a=[],r=-1==t.paramsName.indexOf(" ")?t.paramsName:t.paramsName.split(" "),o=-1==t.paramsType.indexOf(" ")?t.paramsType:t.paramsType.split(" "),l=t.mayBeValues.mayBeValue;for(var n=0;n<r.length;n++){let e={};e["name"]=r[n],e["type"]=o[n],e["isCanValue"]=!1;for(var i=0;i<l.length;i++)if(l[i]["name"]==r[n]){e["isCanValue"]=!0,e["values"]=[];let t=-1==l[i].des.indexOf(" ")?l[i].des:l[i].des.split(" "),n=-1==l[i].value.indexOf(" ")?l[i].value:l[i].value.split(" ");for(var s=0;s<n.length;s++){let i={};i["canValue"]=n[s],i["des"]=t[s],e["values"].push(i)}}a.push(e);let t={paramName:e["name"],paramType:e["type"],paramValue:null};"string"==e["type"]?t["paramValue"]="":"int"==e["type"]?t["paramValue"]=0:"bool"==e["type"]&&(t["paramValue"]="false"),"ID"==t["paramName"]&&(t["paramValue"]=this.machineId),this.values.push(t)}this.paramData=a,this.$forceUpdate()}}},curMachine:{handler:function(e){null==this.curMachine?this.machineId="未选择专机":this.machineId=e.machineId;for(var t=0;t<this.values.length;t++)"ID"==this.values[t].paramName&&(this.values[t].paramValue=this.machineId)}},receiveMsg:{handler:function(e){var t=this;if(null!=t.curSelectWebApi&&null!=e){console.log(e);for(var n=0;n<e.length;n++)if(console.log(e[n].name+"  "+t.methodName),e[n].name==t.methodName){t.unityResInfo=e[n].msgs[e[n].msgs.length-1];break}console.log(t.unityResInfo)}},deep:!0},isClickWebApiBtn:{handler:function(e){if(1==e)for(var t=this,n=0;n<t.receiveMsg.length;n++)if(t.receiveMsg[n].name==t.methodName){t.unityResInfo=t.receiveMsg[n].msgs[t.receiveMsg[n].msgs.length-1];break}this.$emit("clickWebApiBtnHandleFunc",!1)}}}},f=v,g=(0,h.Z)(f,m,d,!1,null,null,null),b=g.exports,y=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"top"}},[t("div",{staticClass:"content"},[t("h1",{on:{click:e.appSetter}},[e._v("LCSVisual")]),null!=e.machines?t("ul",[t("li",[t("span",{staticClass:"span_text"},[e._v("专机：")]),t("span",{staticClass:"span_text"},[e._v(e._s(e.machineName))])]),t("li",[t("span",{staticClass:"span_text"},[e._v("编号：")]),t("span",{staticClass:"span_text"},[t("el-dropdown",{staticClass:"dropDown_machineId",attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.machineId)+" "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.machines,(function(n,i){return t("el-dropdown-item",{key:i,attrs:{command:n}},[e._v(e._s(n.machineId+" "+n.machineName+" "+n.machineVersion))])})),1)],1)],1)]),t("li",[t("span",{staticClass:"span_text"},[e._v("版本：")]),t("span",{staticClass:"span_text"},[e._v(e._s(e.machineVersion))])]),t("li",{staticClass:"other"},[t("el-button",{attrs:{type:"primary"},on:{click:e.loadMachine}},[e._v("加载专机")])],1),t("li",{staticClass:"other"},[t("el-button",{attrs:{type:"primary"},on:{click:e.loadWebApiConfig}},[e._v("加载配置表")])],1),t("li",{staticClass:"other"},[t("el-button",{attrs:{type:"primary"},on:{click:e.reconnectWs}},[e._v("重新连接")])],1)]):e._e()]),t("el-drawer",{staticClass:"setter",attrs:{title:"draw",visible:e.drawer,"with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[t("div",{staticClass:"drawer-content"},[t("h1",{staticClass:"el-icon-s-tools"},[e._v("设置")]),t("el-divider"),t("div",{staticClass:"input-item"},[t("p",{staticClass:"input-item-elem"},[e._v("Server URL：")]),t("el-input",{staticClass:"input-item-ele",attrs:{placeholder:"请输入内容",disabled:e.isDisabled},model:{value:e.serverUrl,callback:function(t){e.serverUrl=t},expression:"serverUrl"}})],1),t("div",{staticClass:"input-item"},[t("p",{staticClass:"input-item-elem"},[e._v("Unity URL：")]),t("el-input",{staticClass:"input-item-ele",attrs:{placeholder:"请输入内容",disabled:e.isDisabled},model:{value:e.unityUrl,callback:function(t){e.unityUrl=t},expression:"unityUrl"}})],1),t("div",{staticClass:"control-btns"},[t("el-row",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",round:""},on:{click:function(t){e.isDisabled=!e.isDisabled}}},[e._v(e._s(1==e.isDisabled?"修改":"禁用"))])],1)],1)],1)])],1)},_=[],C={name:"topConfig",props:["machines"],data(){return{drawer:!1,isDisabled:!1,machineName:"暂无专机",machineId:0,machineVersion:0,serverUrl:"http://localhost:18002/ui/asyncdo",unityUrl:"http://localhost:18102/web/asyncdo/"}},methods:{appSetter(){this.drawer=!0},async loadMachine(){var e=[],t=this.nethelp.toPackJsonStr("Web","Web.Machine.LoadMachineInfo",{});await this.axios.post(this.nethelp.toServeUrl,t,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((t=>{if(0==t.data.success)this.$message({showClose:!0,message:t.data.msg,type:"error",duration:0});else{let i=t.data.result.machines;for(var n=0;n<i.length;n++){let t={machineId:i[n]["id"],machineName:i[n]["name"],machineVersion:i[n]["version"]};e.push(t)}this.$emit("loadMachineDataFunc",e)}})).catch((e=>{alert(this.nethelp.toServeUrl+"  Web.Machine.ReceiveRes"+e)}))},handleCommand(e){this.machineId=e.machineId,this.machineName=e.machineName,this.machineVersion=e.machineVersion},async loadWebApiConfig(){if("暂无专机"!=this.machineName&&0!=this.machineId){var e=this.nethelp.toPackJsonStr("Web","Web.Machine.LoadWebApiConfig",{machineId:this.machineId,machineName:this.machineName,machineVersion:this.machineVersion});await this.axios.post(this.nethelp.toServeUrl,e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{0==e.data.success?alert(e.data.msg):this.$emit("webApiConfigFunc",e.data.result)})).catch((e=>{alert(e)}))}else this.$message.error("加载WebApi配置失败，请先选择专机！")},reconnectWs(){this.$emit("reconnectWSFunc")}},watch:{machineId:{handler:function(){this.$emit("selectMachineFunc",{machineId:this.machineId,machineName:this.machineName})}},machines:{handler:function(e){console.log(e)},deep:!0},serverUrl:{handler:function(e){this.nethelp.toServeUrl=e}},unityUrl:{handler:function(e){this.nethelp.toServeUrl=e}}}},w=C,S=(0,h.Z)(w,y,_,!1,null,null,null),W=S.exports,A=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"footer"}},[e._v(" "+e._s(e.msg)+" ")])},M=[],k={name:"footerBar",props:["toFooterMsg"],data(){return{msg:""}},methods:{currentTime(){for(var e=new Date,t=[e.getHours(),e.getMinutes(),e.getSeconds()],n=0;n<t.length;n++)t[n]>=1&&t[n]<=9&&(t[n]="0"+t[n]);var i=t[0]+":"+t[1]+":"+t[2];return i}},watch:{toFooterMsg:{handler:function(e){this.msg=this.currentTime()+" "+e}}}},I=k,N=(0,h.Z)(I,A,M,!1,null,null,null),U=N.exports,x={components:{h_sidebarBtnGroup:p,h_paramsMgr:b,h_topConfig:W,h_footerBar:U},beforeCreate(){var e=this;e.webSocketIsOpen=!1,this.WEB_SOCKET=null},created(){this.toReceiveMachine()},data(){return{webApiConfig:null,curSelectWebApi:null,isClickWebApiBtn:!1,machines:[],recodeData:null,curMachine:null,receiveMsg:[],toFooterMsg:"",webSocketIsOpen:!1,explainMsg:""}},methods:{webApiConfigFunc(e){this.webApiConfig=e},selectWebApiFunc(e){this.curSelectWebApi=e},selectMachineFunc(e){this.curMachine=e},clickWebApiBtnFunc(e){this.isClickWebApiBtn=e},clickWebApiBtnHandleFunc(e){this.isClickWebApiBtn=e},loadMachineDataFunc(e){this.machines=e},async toReceiveMachine(){var e=this.nethelp.toPackJsonStr("Web","Web.Machine.LoadMachineInfo",{});await this.axios.post(this.nethelp.toServeUrl,e,{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{if(console.log(e.data),0==e.data.success)this.$message({showClose:!0,message:e.data.msg,type:"error",duration:0});else{let n=e.data.result.machines;for(var t=0;t<n.length;t++){let e={machineId:n[t]["id"],machineName:n[t]["name"],machineVersion:n[t]["version"]};this.machines.push(e)}}})).catch((e=>{alert(this.nethelp.toServeUrl+"  Web.Machine.ReceiveRes"+e)}))},reconnectWSFunc(){this.connectWS()},connectWS(){var e=this;1!=e.webSocketIsOpen?(e.webSocketIsOpen=!0,this.WEB_SOCKET=new WebSocket(this.webSocketUrl+"/ws"),e.toFooterMsg="[WebSocket] 连接中...",e.explainMsg="WebSocket正在连接中...",this.WEB_SOCKET.onopen=function(t){e.toFooterMsg="[WebSocket] 打开连接..."+t,e.explainMsg="WebSocket已连接"},this.WEB_SOCKET.onmessage=function(t){e.toFooterMsg="[WebSocket] 接收到来自服务器的消息: "+t.data;let n=JSON.parse(t.data);if("Unity3D"==n.userName){let s=n.methodName;e.WebSocketReceiveMsg(s);let a=!1,r={};null!=e.receiveMsg&&void 0!=e.receiveMsg||(e.receiveMsg=[]);for(var i=0;i<e.receiveMsg.length;i++)if(e.receiveMsg[i].name==s){a=!0,r=e.receiveMsg[i];break}1==a?r.msgs.push(t.data):(r["name"]=s,r["msgs"]=[],r["msgs"].push(t.data),e.receiveMsg.push(r)),this.receiveFromUnityMsg=e.receiveMsg}},this.WEB_SOCKET.onclose=function(t){e.toFooterMsg="[WebSocket] 连接关闭."+t,e.webSocketIsOpen=!1,e.webSocketClose()}):this.$notify({title:"警告",message:e.explainMsg,type:"warning"})},WebSocketReceiveMsg(e){this.$notify({title:"Unity发来请求：",message:e,type:"success"})},webSocketClose(){this.$notify({title:"警告",message:"WebSocket已关闭！",type:"warning"})},fromUnitRes(e){this.mothedsApisRes=e},recordsFunc(e){this.recodeData=e,console.log(this.recodeData)}}},F=x,O=(0,h.Z)(F,s,a,!1,null,null,null),B=O.exports,T=n(8499),V=n.n(T),$=n(4161);let D="http://localhost:18002/ui/asyncdo",R="http://localhost:18102/web/asyncdo/",E=9999,j=function(e,t,n){var i={Key:0,token:"",userName:e,type:"IAttributeExecute",methodName:t,methodArgs:n,ClientIP:null,Args:n};return JSON.stringify(i)};var P={toUnityUrl:D,toServeUrl:R,machineID:E,toPackJsonStr:j};i["default"].config.productionTip=!1,i["default"].prototype.axios=$.Z,i["default"].prototype.nethelp=P,i["default"].use(V()),i["default"].prototype.$_machineId="",i["default"].prototype.$_machineName="",i["default"].prototype.WEB_SOCKET,i["default"].prototype.webSocketUrl="ws://localhost:18102",i["default"].prototype.receiveFromUnityMsg="",new i["default"]({render:e=>e(B)}).$mount("#app")}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i](a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,i,s,a){if(!i){var r=1/0;for(h=0;h<e.length;h++){i=e[h][0],s=e[h][1],a=e[h][2];for(var o=!0,l=0;l<i.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(o=!1,a<r&&(r=a));if(o){e.splice(h--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var h=e.length;h>0&&e[h-1][2]>a;h--)e[h]=e[h-1];e[h]=[i,s,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,a,r=i[0],o=i[1],l=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var h=l(n)}for(t&&t(i);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(h)},i=self["webpackChunkv_machinesole"]=self["webpackChunkv_machinesole"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(3742)}));i=n.O(i)})();
//# sourceMappingURL=app.91e1dc98.js.map